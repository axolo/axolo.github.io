<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MVC及PHP++、PHP--胡思乱想杂记 | 方跃明的博客</title>
    <meta name="description" content="A VitePress site">
    <link rel="preload stylesheet" href="/assets/style.5dbd6d0f.css" as="style">
    <link rel="modulepreload" href="/assets/app.3ad48a2f.js">
    <link rel="modulepreload" href="/assets/php-lite.md.993d49b0.lean.js">
    
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5211c0b1><!--[--><!--]--><!--[--><span tabindex="-1" data-v-151f2593></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-151f2593> Skip to content </a><!--]--><!----><header class="VPNav no-sidebar" data-v-5211c0b1 data-v-8c0a9870><div class="VPNavBar" data-v-8c0a9870 data-v-1bbed88e><div class="container" data-v-1bbed88e><div class="VPNavBarTitle" data-v-1bbed88e data-v-d5925166><a class="title" href="/" data-v-d5925166><!--[--><!--]--><!----><!--[-->方跃明的博客<!--]--><!--[--><!--]--></a></div><div class="content" data-v-1bbed88e><!--[--><!--]--><!----><!----><!----><div class="VPNavBarAppearance appearance" data-v-1bbed88e data-v-a3e7452b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-a3e7452b data-v-481098f9 data-v-eba7420e><span class="check" data-v-eba7420e><span class="icon" data-v-eba7420e><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-481098f9><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-481098f9><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-1bbed88e data-v-e4361c82 data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6ffb57d3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-6ffb57d3><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><!----><!--[--><!--[--><!----><div class="group" data-v-e4361c82><div class="item appearance" data-v-e4361c82><p class="label" data-v-e4361c82>Appearance</p><div class="appearance-action" data-v-e4361c82><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-e4361c82 data-v-481098f9 data-v-eba7420e><span class="check" data-v-eba7420e><span class="icon" data-v-eba7420e><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-481098f9><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-481098f9><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-1bbed88e data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div><!----></header><!----><!----><div class="VPContent" id="VPContent" data-v-5211c0b1 data-v-296cfad2><div class="VPDoc has-aside" data-v-296cfad2 data-v-cfb513e0><div class="container" data-v-cfb513e0><div class="aside" data-v-cfb513e0><div class="aside-curtain" data-v-cfb513e0></div><div class="aside-container" data-v-cfb513e0><div class="aside-content" data-v-cfb513e0><div class="VPDocAside" data-v-cfb513e0 data-v-afc4c1a1><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-afc4c1a1 data-v-2865c0b0><div class="content" data-v-2865c0b0><div class="outline-marker" data-v-2865c0b0></div><div class="outline-title" data-v-2865c0b0>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-2865c0b0><span class="visually-hidden" id="doc-outline-aria-label" data-v-2865c0b0> Table of Contents for current page </span><ul class="root" data-v-2865c0b0 data-v-1188541a><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-afc4c1a1></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-cfb513e0><div class="content-container" data-v-cfb513e0><!--[--><!--]--><main class="main" data-v-cfb513e0><div style="position:relative;" class="vp-doc _php-lite" data-v-cfb513e0><div><h1 id="mvc-及-php-、php-胡思乱想杂记" tabindex="-1">MVC 及 PHP++、PHP-- 胡思乱想杂记 <a class="header-anchor" href="#mvc-及-php-、php-胡思乱想杂记" aria-hidden="true">#</a></h1><blockquote><p><a href="http://user.qzone.qq.com/61077523/blog/1249101307" target="_blank" rel="noreferrer">http://user.qzone.qq.com/61077523/blog/1249101307</a></p></blockquote><p>有一定经验的开发者都了解MVC模式，特别是基于WEB而且又是可以使用嵌入HTML语言进行开发的，比如PHP。诚然PHP作为一种嵌入式的脚本语言是强大的，这也是一直以来传统PHP给很多人的认知。以至于在PHP3甚至在PHP4时代接触过并最终放弃了PHP的人，都停留在这个认识上，认为PHP没有什么长处，太过简陋。其实不然，从技术角度来讲，一门语言的语法不能决定一个应用的好坏，很多情况下，语言仅仅是实现工具，几乎所有大中型应该都不太会单一的采用一门语言来开发，各种语言都有其自身的长处。</p><p>长期以来PHP被杂糅进太多的东西了，要负责Db、又要负责HTML、还要负责Controller、还要负责Model，等等，成了PHP++了。发展到今天，PHP早就脱离了嵌入HTML脚本语言的范畴。应该有更重要的事情给PHP做。当然嵌入HTML当脚本使唤，仍然是强项，但不应该杂糅了。在此换个角度来看PHP。把PHP按角色来理清一下，顺便来发明几个新名词。与数据库层面打交道的叫PHP-Db，与流程控制相关的叫PHP-Controler，与HTML等终端呈现打交道的叫PHP-Client，等等。这样认识可能会更清晰点。</p><p>这几天闲来无事，朝思暮想，对MVC的理解有了新的认识，有一点点浅见，于是折腾了一张图。</p><p><img src="/assets/php-lite.f465803d.gif" alt="我的MVC框架示意图"></p><p>最大的收获是我们是否需要很肥大的View呢？在各种PHP框架中，View端的语言基本上都采用PHP-Client，比如ZendFramework、QeePHP等，还有的采用模板标签或模板引擎。在我看来这其实是方便开发者使用的，其实对于View，可以精简至极至。图中的Input和Output都涉及到View。精简后的View可以根本就不用去管Input和Output的设备、形式、语言，只需要Input进正确格式的数据（比如JSON、XML），而Output出指定格式的数据（比如JSON、XML）。同样，Output的呈现形式、方法、手段等不是我们要关注的。对于WEB来说可以Output出的数据可以交给ExtJS，可以交给PHP(此时的PHP是WEB前端脚本语言)，可以交给原生Javascript处理。甚至可以以WML语言输出到WAP。也就是说View如何呈现不是核心所要关注的。</p><p>然而我们是怎么做的呢？在Controller中很多开发者并不注重数据的格式统一与规划，很随意的就丢给了View。更有甚者Controller和View杂糅了，权责不分，该View做的事让Controller做了，而View又在做Controller的事。不管是从设计简单的网站应用出发还是企业行业应用出发，PHP-Controller都不应该糅进PHP-Client。View里Output出单纯的格式化的数据，有利于AJAX及WebService等。规范了输出，View的呈现就可以由其它团队单独负责，他们爱用PHP，爱用ExtJS，爱用jQuery，爱谁用谁。</p><p>至于什么是Model我也理解一下，理解的不对的话，请各位多踹几脚。Model在很多人心里长期以来被Db给占了。而在Controller中写了大量应该Model去完成的内容。广义上说其实Model并不仅仅是Db。比如我们用的FCKeditor我们可以说是一个Model，它用来创建一个可视编辑器。大方面的Model估计都能重视。再说一个小的，比如一个用户系统中的“用户新增（UserAdd）”这个功能，用户端可能是用户注册，管理端可以是直接创建一个用户。如果在控制器里直接写，用户端和管理端那就重复写代码了。这样的功能就应该放到Model里，拿来调用。这个就叫Model，类似函数，也叫业务逻辑。控制器控制的只是业务流程。如果控制器掺和模型的事，凡事诸葛亮，会弄得拥肿无比，非常繁琐，会被累死。</p><p>Cache又是一个什么概念呢？一个简单的例子，商品分类列表，当去存取这个列表时，核心就应该先去Cache里找，找到了核对一下是不是要更新，如果没找到或者要更新，那么就先更新或者在Cache里建立一个副本(这显然是一个很小的循环或者是分支判断)。然后把Cache里的列表取出来。这样做是免除大量的去存取数据库操作，或称为大量的Model运算。当然我们可以设计成，如果这个列表有变动就主动去更新Cache。这样命中率会高很多。应该的效率就会提高很多。很多人以为生成静态HTML脚本就是Cache的全部，只是Cache局部小应用，模板引擎里常用。想开了去，放大了说，Cache跟View没直接关系。Cache可以用在View，当然也可以用在Controller和Model。</p><p>最近AD挺多，顺路也AD一下：你的PHP--了么？</p><blockquote><p>注：PHP-Client、PHP-Controler、PHP-Db等都是作者发明的名词，非专业通用名词</p></blockquote><blockquote><p>方跃明 2009-8-1 12:35</p></blockquote></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-cfb513e0 data-v-21f75714><div class="edit-info" data-v-21f75714><!----><div class="last-updated" data-v-21f75714><p class="VPLastUpdated" data-v-21f75714 data-v-18fe8fc2>Last updated: <time datetime="2023-01-09T06:40:13.000Z" data-v-18fe8fc2></time></p></div></div><!----></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"docker-portianer.md\":\"f62ac0b5\",\"chrome-inspect.md\":\"9a58f0d7\",\"centos-intro.md\":\"f5421e4b\",\"centos-develop-env.md\":\"ad206fb0\",\"ding-cloud-push.md\":\"4666aa9c\",\"javascript-mind-map.md\":\"3ffd605f\",\"jekyll-intro-to-quit.md\":\"cf21d77a\",\"rbac.md\":\"2df36506\",\"webvirt-cloud.md\":\"472a0a21\",\"frp-ddns.md\":\"32b1aad5\",\"webpack-drop-console.md\":\"c2ba402d\",\"javascript-promise.md\":\"3558b579\",\"sql-join.md\":\"04d35051\",\"ios-develop.md\":\"660178fc\",\"frontend-tools.md\":\"3bbd34c1\",\"delete-with-body.md\":\"5b6fbd8e\",\"umijs-ux.md\":\"a423d938\",\"kubernetes-docker-mesos.md\":\"36075394\",\"mysql-multi-version.md\":\"86b3931f\",\"mysql-install.md\":\"bcdeda1c\",\"git.md\":\"a858a765\",\"php-lite.md\":\"993d49b0\",\"linux-directory.md\":\"0df1fe8d\",\"web-component.md\":\"c474c8c2\",\"linux-home.md\":\"1988ff09\",\"mysql-backup.md\":\"34caee5b\",\"leophp.md\":\"d022919e\",\"localhost-ssl-cert.md\":\"0a4c5c82\",\"php-imagick-windows.md\":\"c2d73c92\",\"leovue-why.md\":\"572fd0f4\",\"git-webhook.md\":\"45a5e720\",\"frp.md\":\"4fe3b6df\",\"centos-openvpn.md\":\"6800f755\",\"oracle-plsql.md\":\"f5ff0555\",\"centos-info.md\":\"8dbd0951\",\"frontend-map.md\":\"4f05b57a\",\"vi.md\":\"13446017\",\"vue-props.md\":\"6169de44\",\"lodop.md\":\"efda89b0\",\"php-fall.md\":\"825d06ee\",\"git-ignore-exclude.md\":\"835d178a\",\"zabbix-install.md\":\"1566e733\",\"linux-make-install.md\":\"c0b1271c\",\"centos-firewall.md\":\"1d8e3e9c\",\"leovue-npm.md\":\"041d63b0\",\"centos-kvm.md\":\"6b3c4d28\",\"nginx-php-fpm.md\":\"0f92e9ee\",\"sql-antipatterns.md\":\"a9f679cb\",\"linux-shell.md\":\"b85e8d5c\",\"web-internet.md\":\"081c1b80\",\"git-commitlint.md\":\"989fb2bf\",\"centos-network.md\":\"ed9c866e\",\"kubernetes-install.md\":\"8731d47a\",\"git-subtree.md\":\"1730932c\",\"node-on-wsl.md\":\"c298e266\",\"index.md\":\"31e2e086\",\"mysql-on-docker.md\":\"f5f602e3\",\"jquery-table.md\":\"6c6c6faf\",\"egg-oauth.md\":\"38703714\"}")</script>
    <script type="module" async src="/assets/app.3ad48a2f.js"></script>
    
  </body>
</html>