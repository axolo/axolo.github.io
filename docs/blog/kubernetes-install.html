<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>kubernetes安装指南 | 方跃明的技术博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="分享前端、后端、运维，即所谓的全栈开发技术">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.b3ef9ea7.css" as="style"><link rel="preload" href="/assets/js/app.0fbfbde8.js" as="script"><link rel="preload" href="/assets/js/3.5f5351f1.js" as="script"><link rel="preload" href="/assets/js/1.15c5a7a9.js" as="script"><link rel="preload" href="/assets/js/10.186332f8.js" as="script"><link rel="prefetch" href="/assets/js/11.716705ed.js"><link rel="prefetch" href="/assets/js/12.d8ad9e9e.js"><link rel="prefetch" href="/assets/js/13.f721b4ea.js"><link rel="prefetch" href="/assets/js/14.17f52517.js"><link rel="prefetch" href="/assets/js/15.d6f69118.js"><link rel="prefetch" href="/assets/js/16.b88aa170.js"><link rel="prefetch" href="/assets/js/17.3f436a79.js"><link rel="prefetch" href="/assets/js/18.e1036b56.js"><link rel="prefetch" href="/assets/js/19.ddbdcb27.js"><link rel="prefetch" href="/assets/js/20.83156c78.js"><link rel="prefetch" href="/assets/js/21.a44a741c.js"><link rel="prefetch" href="/assets/js/22.c93da2fe.js"><link rel="prefetch" href="/assets/js/23.8199b94a.js"><link rel="prefetch" href="/assets/js/24.019ab4f2.js"><link rel="prefetch" href="/assets/js/25.3d1e6950.js"><link rel="prefetch" href="/assets/js/26.22e0a055.js"><link rel="prefetch" href="/assets/js/27.a46b5b8a.js"><link rel="prefetch" href="/assets/js/28.f75fef7e.js"><link rel="prefetch" href="/assets/js/29.44130788.js"><link rel="prefetch" href="/assets/js/30.11fcb21f.js"><link rel="prefetch" href="/assets/js/31.f1cdeec5.js"><link rel="prefetch" href="/assets/js/32.3a946401.js"><link rel="prefetch" href="/assets/js/33.78d6dd53.js"><link rel="prefetch" href="/assets/js/34.5b0bdde7.js"><link rel="prefetch" href="/assets/js/35.15c7d370.js"><link rel="prefetch" href="/assets/js/36.0e806ed9.js"><link rel="prefetch" href="/assets/js/37.f6d24f15.js"><link rel="prefetch" href="/assets/js/38.8575c981.js"><link rel="prefetch" href="/assets/js/39.4c840015.js"><link rel="prefetch" href="/assets/js/4.8c2d11fb.js"><link rel="prefetch" href="/assets/js/40.8c68d5a1.js"><link rel="prefetch" href="/assets/js/41.594b339b.js"><link rel="prefetch" href="/assets/js/42.391c6a9b.js"><link rel="prefetch" href="/assets/js/43.9a47a1a5.js"><link rel="prefetch" href="/assets/js/44.d617acf4.js"><link rel="prefetch" href="/assets/js/45.89022c40.js"><link rel="prefetch" href="/assets/js/46.f14ccb81.js"><link rel="prefetch" href="/assets/js/47.6cdbcc51.js"><link rel="prefetch" href="/assets/js/48.c9b8baab.js"><link rel="prefetch" href="/assets/js/49.d1ce2a81.js"><link rel="prefetch" href="/assets/js/5.61aaa9b0.js"><link rel="prefetch" href="/assets/js/50.921f6e21.js"><link rel="prefetch" href="/assets/js/6.cd0168a9.js"><link rel="prefetch" href="/assets/js/7.5d8d57ea.js"><link rel="prefetch" href="/assets/js/8.92a81767.js"><link rel="prefetch" href="/assets/js/9.b1067689.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b3ef9ea7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>方跃明的技术博客</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>分享前端、后端、运维，即所谓的全栈开发技术</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>方跃明</span>
            
          <span data-v-4e82dffc>2019 - </span>
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/head.png" alt="方跃明的技术博客" class="logo"> <span class="site-name">方跃明的技术博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/后端/" class="nav-link"><i class="undefined"></i>
  后端
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端/" class="nav-link"><i class="undefined"></i>
  前端
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/axolo" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/head.png" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    方跃明
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>39</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>2</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/后端/" class="nav-link"><i class="undefined"></i>
  后端
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端/" class="nav-link"><i class="undefined"></i>
  前端
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/axolo" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc></h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>方跃明</span>
            
          <span data-v-4e82dffc>2019 - </span>
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">kubernetes安装指南</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>方跃明</span></i> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="kubernetes安装指南"><a href="#kubernetes安装指南" class="header-anchor">#</a> kubernetes安装指南</h1> <p><img src="/assets/img/container.cfee2d68.jpg" alt="容器生态圈"></p> <h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <h3 id="kubernetes"><a href="#kubernetes" class="header-anchor">#</a> kubernetes</h3> <p>kubernetes（简称k8s）是Google开源的容器集群管理系统。它构建Ddocker技术之上，为容器化的应用提供资源调度、部署运行、服务发现、扩容缩容等整一套功能，本质上可看作是基于容器技术的mini-PaaS平台。</p> <p><img src="/assets/img/architecture.62578e8c.png" alt="kubernetes"></p> <h3 id="kubernetes-master"><a href="#kubernetes-master" class="header-anchor">#</a> kubernetes-master</h3> <ul><li>kube-apiserver：k8s的管理接口</li> <li>kube-scheduer：k8s调度器，容器的启动、迁移、扩容缩减时候，选择哪个node，就看它了。</li> <li>kube-controller-manager：k8s对node的控制行为，比如怎么去调用node启动一个容器。</li></ul> <h3 id="kubernetes-node"><a href="#kubernetes-node" class="header-anchor">#</a> kubernetes-node</h3> <ul><li>kubelet：负责node的管理，基本所有操作都靠它。</li> <li>kube-proxy：每个node里的container都在一个私有网络中，kube-proxy的作用就是做一个反向代理，让访问者访问这个node的时候，可以转发到内部对应的container。</li></ul> <h3 id="flannel"><a href="#flannel" class="header-anchor">#</a> flannel</h3> <p>flannel可以为容器提供网络服务。其模型为全部的容器使用一个network，然后在每个host上从network中划分一个子网subnet。为host上的容器创建网络时，从subnet中划分一个ip给容器。其采用目前比较流行的no server的方式，即不存在所谓的控制节点，而是每个host上的flanneld从一个etcd中获取相关数据，然后声明自己的子网网段，并记录在etcd中。其他的host对数据转发时，从etcd中查询到该子网所在的host的ip，然后将数据发往对应host上的flanneld，交由其进行转发。根据kubernetes的模型，即为每个pod提供一个ip。flannel的模型正好与之契合。因此flannel是最简单易用的kubernetes集群网络方案。</p> <p><img src="/assets/img/cluster.57fa8162.png" alt="flannel"></p> <h3 id="etcd"><a href="#etcd" class="header-anchor">#</a> etcd</h3> <p>在分布式系统中，如何管理节点间的状态一直是一个难题，etcd像是专门为集群环境的服务发现和注册而设计，它提供了数据TTL失效、数据改变监视、多值、目录监听、分布式锁原子操作等功能，可以方便的跟踪并管理集群节点的状态。etcd的特性如下：</p> <ul><li>简单: curl可访问的用户的API（HTTP+JSON）</li> <li>安全: 可选的SSL客户端证书认证</li> <li>快速: 单实例每秒 1000 次写操作</li> <li>可靠: 使用Raft保证一致性</li></ul> <p>etcd是CoreOS的核心组件，负责节点间的服务发现和配置共享，运行在CoreOS中的应用可以通过etcd读取或者写入数据。虽然etcd是为CoreOS而设计，但其可以运行在多个平台上，包括 OS X、Linux、BSD。角色功能如下：</p> <ul><li>作为kubernetes的数据库，存储了k8s自身的信息、以及各种业务容器信息等。</li> <li>存储flannel网络配置信息，供各节点协调。</li></ul> <p><img src="/assets/img/etcd.ff2b8c3d.png" alt="etcd"></p> <h3 id="docker"><a href="#docker" class="header-anchor">#</a> docker</h3> <p>Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的Linux机器上，也可以实现虚拟化，容器是完全使用沙箱机制，相互之间不会有任何接口。一个完整的Docker有以下几个部分组成：</p> <ul><li>Client：客户端</li> <li>Daemon：守护进程</li> <li>Container：容器</li> <li>Image：镜像</li></ul> <p><img src="/assets/img/docker.3b5607d6.png" alt="docker"></p> <h2 id="规划"><a href="#规划" class="header-anchor">#</a> 规划</h2> <p>本例虽然均用IP进行操作，但是建议部署的时候，建议用hosts或者DNS取代IP。</p> <table><thead><tr><th>类型</th> <th>组件</th> <th style="text-align:center;">数量</th> <th>IP</th></tr></thead> <tbody><tr><td>Master</td> <td>kubernetes-master etcd</td> <td style="text-align:center;">1</td> <td>192.168.20.25</td></tr> <tr><td>Node</td> <td>kubernetes-node docker flannel</td> <td style="text-align:center;">2</td> <td>192.168.20.22 192.168.20.26</td></tr></tbody></table> <p><img src="data:image/png;base64,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" alt="kubernetes with Flannel"></p> <h3 id="前提"><a href="#前提" class="header-anchor">#</a> 前提</h3> <ul><li>SELinux关闭</li> <li>firewalld开放8080、2379端口</li></ul> <h2 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h2> <h3 id="etcd配置"><a href="#etcd配置" class="header-anchor">#</a> etcd配置</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 安装</span>
yum <span class="token function">install</span> etcd
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token comment"># 配置 /etc/etcd/etcd.conf</span>
<span class="token constant">ETCD_NAME</span><span class="token attr-value"><span class="token punctuation">=</span>default</span>
<span class="token constant">ETCD_DATA_DIR</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;/var/lib/etcd/default.etcd&quot;</span>
<span class="token constant">ETCD_LISTEN_CLIENT_URLS</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;http://0.0.0.0:2379&quot;</span>
<span class="token constant">ETCD_ADVERTISE_CLIENT_URLS</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;http://192.168.20.25:2379&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 启动</span>
systemctl <span class="token builtin class-name">enable</span> etcd
systemctl start etcd
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>etcdctl <span class="token builtin class-name">set</span> /coreos.com/network/config <span class="token string">'{ &quot;Network&quot;: &quot;10.1.0.0/16&quot; }'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="master"><a href="#master" class="header-anchor">#</a> master</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 安装</span>
yum <span class="token function">install</span> kubernetes-master
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token comment"># 配置 /etc/kubernetes/apiserver</span>
<span class="token constant">KUBE_API_ADDRESS</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;--address=0.0.0.0&quot;</span>
<span class="token constant">KUBE_ETCD_SERVERS</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;--etcd_servers=http://192.168.20.25:2379&quot;</span>
<span class="token constant">KUBE_SERVICE_ADDRESSES</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;--service-cluster-ip-range=10.254.0.0/16&quot;</span>
<span class="token constant">KUBE_ADMISSION_CONTROL</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;--admission_control=NamespaceLifecycle,NamespaceExists,LimitRanger,SecurityContextDeny,ResourceQuota&quot;</span>
<span class="token constant">KUBE_API_ARGS</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token comment"># 配置 /etc/kubernetes/controller-manager</span>
<span class="token constant">KUBE_CONTROLLER_MANAGER_ARGS</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;--node-monitor-grace-period=10s --pod-eviction-timeout=10s&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token comment"># 配置 /etc/kubernetes/config</span>
<span class="token constant">KUBE_LOGTOSTDERR</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;--logtostderr=true&quot;</span>
<span class="token constant">KUBE_LOG_LEVEL</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;--v=0&quot;</span>
<span class="token constant">KUBE_ALLOW_PRIV</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;--allow_privileged=false&quot;</span>
<span class="token constant">KUBE_MASTER</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;--master=http://192.168.20.25:8080&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 启动服务</span>
systemctl <span class="token builtin class-name">enable</span> kube-apiserver kube-scheduler kube-controller-manager
systemctl start kube-apiserver kube-scheduler kube-controller-manager
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="node"><a href="#node" class="header-anchor">#</a> node</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 安装</span>
yum <span class="token function">install</span> kubernetes-node flannel docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token comment"># 配置 /etc/kubernetes/config</span>
<span class="token constant">KUBE_LOGTOSTDERR</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;--logtostderr=true&quot;</span>
<span class="token constant">KUBE_LOG_LEVEL</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;--v=0&quot;</span>
<span class="token constant">KUBE_ALLOW_PRIV</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;--allow_privileged=false&quot;</span>
<span class="token constant">KUBE_MASTER</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;--master=http://192.168.20.25:8080&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token comment"># 配置 /etc/kubernetes/kubelet</span>
<span class="token constant">KUBELET_ADDRESS</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;--address=127.0.0.1&quot;</span>
<span class="token constant">KUBELET_HOSTNAME</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;--hostname_override=192.168.20.22&quot;</span>
<span class="token constant">KUBELET_API_SERVER</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;--api_servers=http://192.168.20.25:8080&quot;</span>
<span class="token constant">KUBELET_ARGS</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;--pod-infra-container-image=kubernetes/pause&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token comment"># 配置 /etc/sysconfig/flanneld</span>
<span class="token constant">FLANNEL_ETCD</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;http://192.168.20.25:2379&quot;</span>
<span class="token constant">FLANNEL_ETCD_KEY</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;/coreos.com/network&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>systemctl <span class="token builtin class-name">enable</span> kubelet kube-proxy flanenld docker
systemctl start kubelet kube-proxy flanneld docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">1/21/2020, 11:06:01 AM</span></div></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/blog/kubernetes-install.html#简介" class="sidebar-link reco-side-简介" data-v-70334359>简介</a></li><li class="level-3" data-v-70334359><a href="/blog/kubernetes-install.html#kubernetes" class="sidebar-link reco-side-kubernetes" data-v-70334359>kubernetes</a></li><li class="level-3" data-v-70334359><a href="/blog/kubernetes-install.html#kubernetes-master" class="sidebar-link reco-side-kubernetes-master" data-v-70334359>kubernetes-master</a></li><li class="level-3" data-v-70334359><a href="/blog/kubernetes-install.html#kubernetes-node" class="sidebar-link reco-side-kubernetes-node" data-v-70334359>kubernetes-node</a></li><li class="level-3" data-v-70334359><a href="/blog/kubernetes-install.html#flannel" class="sidebar-link reco-side-flannel" data-v-70334359>flannel</a></li><li class="level-3" data-v-70334359><a href="/blog/kubernetes-install.html#etcd" class="sidebar-link reco-side-etcd" data-v-70334359>etcd</a></li><li class="level-3" data-v-70334359><a href="/blog/kubernetes-install.html#docker" class="sidebar-link reco-side-docker" data-v-70334359>docker</a></li><li class="level-2" data-v-70334359><a href="/blog/kubernetes-install.html#规划" class="sidebar-link reco-side-规划" data-v-70334359>规划</a></li><li class="level-3" data-v-70334359><a href="/blog/kubernetes-install.html#前提" class="sidebar-link reco-side-前提" data-v-70334359>前提</a></li><li class="level-2" data-v-70334359><a href="/blog/kubernetes-install.html#配置" class="sidebar-link reco-side-配置" data-v-70334359>配置</a></li><li class="level-3" data-v-70334359><a href="/blog/kubernetes-install.html#etcd配置" class="sidebar-link reco-side-etcd配置" data-v-70334359>etcd配置</a></li><li class="level-3" data-v-70334359><a href="/blog/kubernetes-install.html#node" class="sidebar-link reco-side-node" data-v-70334359>node</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.0fbfbde8.js" defer></script><script src="/assets/js/3.5f5351f1.js" defer></script><script src="/assets/js/1.15c5a7a9.js" defer></script><script src="/assets/js/10.186332f8.js" defer></script>
  </body>
</html>
