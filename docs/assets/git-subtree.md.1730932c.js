import{_ as s,o as a,c as n,a as l}from"./app.3ad48a2f.js";const h=JSON.parse('{"title":"Git subtree","description":"","frontmatter":{"title":"Git subtree","time":"2020-08-20T00:00:00.000Z","layout":"post","categories":"Git","tags":["Git"]},"headers":[{"level":2,"title":"新建并关联子分支","slug":"新建并关联子分支","link":"#新建并关联子分支","children":[]},{"level":2,"title":"若对应子分支已存在","slug":"若对应子分支已存在","link":"#若对应子分支已存在","children":[]},{"level":2,"title":"主分支操作同步到子分支","slug":"主分支操作同步到子分支","link":"#主分支操作同步到子分支","children":[]},{"level":2,"title":"子分支独立操作","slug":"子分支独立操作","link":"#子分支独立操作","children":[]}],"relativePath":"git-subtree.md","lastUpdated":1673246413000}'),p={name:"git-subtree.md"},o=l(`<h1 id="git-subtree" tabindex="-1">Git subtree <a class="header-anchor" href="#git-subtree" aria-hidden="true">#</a></h1><p>和<code>Git Submodule</code>一样，<code>Git Subtree</code>也是多人协作开发利器。</p><ul><li><a href="https://git-scm.com/book/zh/v2" target="_blank" rel="noreferrer">官方文档</a></li><li><a href="http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html" target="_blank" rel="noreferrer">Git教程</a></li><li><a href="https://segmentfault.com/a/1190000012002151" target="_blank" rel="noreferrer">简明教程</a></li><li><a href="https://segmentfault.com/a/1190000003969060" target="_blank" rel="noreferrer">双向同步</a></li></ul><p><strong>注意：</strong></p><ul><li>若子分支为主分支一个目录，请勿同名</li><li>若子分支污染主分支，请注意同步更新避免冲突</li><li>若子分支为独立分支，不污染主分支，切换以操作不同分支</li></ul><h2 id="新建并关联子分支" tabindex="-1">新建并关联子分支 <a class="header-anchor" href="#新建并关联子分支" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 新建空分支并提交到远程</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">checkout</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--orphan</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">subtree-branch</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-rf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--all</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">commit</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">chore: init subtree</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">push</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--set-upstream</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">origin</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">subtree-branch</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 切换到主分支并关联子分支</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">checkout</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">master</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">branch</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">subtree-branch</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">subtree</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--prefix=subtree-branch</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">origin</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">subtree-branch</span></span>
<span class="line"></span></code></pre></div><h2 id="若对应子分支已存在" tabindex="-1">若对应子分支已存在 <a class="header-anchor" href="#若对应子分支已存在" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 克隆项目</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">clone</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://github.com/axolo/your-project</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 关联并拉取子分支</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># git subtree pull -P &lt;prefix&gt; &lt;repository&gt; &lt;ref&gt;</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">subtree</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--prefix=www</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">origin</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gh-pages</span></span>
<span class="line"></span></code></pre></div><h2 id="主分支操作同步到子分支" tabindex="-1">主分支操作同步到子分支 <a class="header-anchor" href="#主分支操作同步到子分支" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 主分支正常操作：改动www目录下的内容</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--all</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">commit</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">modify subtree</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">push</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 提交到子分支</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">subtree</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">push</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--prefix=www</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">origin</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gh-pages</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 拉取子分支</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">subtree</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--prefix=www</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">origin</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gh-pages</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 在子分支生成新分支hotfix-001</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">subtree</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">push</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--prefix=www</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">origin</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">hotfix-</span><span style="color:#F78C6C;">001</span></span>
<span class="line"></span></code></pre></div><h2 id="子分支独立操作" tabindex="-1">子分支独立操作 <a class="header-anchor" href="#子分支独立操作" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 切换到子分支</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">checkout</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">subtree-branch</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># working in subtree</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--all</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">commit</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">modify</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">push</span></span>
<span class="line"></span></code></pre></div><blockquote><p>方跃明 2020-08-20</p></blockquote>`,14),e=[o];function t(r,c,C,i,y,D){return a(),n("div",null,e)}const u=s(p,[["render",t]]);export{h as __pageData,u as default};
