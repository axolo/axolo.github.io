import{_ as s,o as a,c as l,e as n}from"./app.077a4a1b.js";const D=JSON.parse('{"title":"CentOS 防火墙","description":"CentOS 使用 firewalld 防火墙系统，大多数服务需要防火墙放行才能被访问。","frontmatter":{"title":"CentOS 防火墙","description":"CentOS 使用 firewalld 防火墙系统，大多数服务需要防火墙放行才能被访问。","time":"2019-12-26T00:00:00.000Z","category":"运维","tags":["CentOS","Linux"]},"headers":[{"level":2,"title":"放行","slug":"放行","link":"#放行","children":[]},{"level":2,"title":"服务","slug":"服务","link":"#服务","children":[]},{"level":2,"title":"命令","slug":"命令","link":"#命令","children":[]}],"relativePath":"centos-firewall.md","lastUpdated":1673850358000}'),p={name:"centos-firewall.md"},o=n(`<h1 id="centos防火墙" tabindex="-1">CentOS防火墙 <a class="header-anchor" href="#centos防火墙" aria-hidden="true">#</a></h1><p>CentOS 使用 firewalld 防火墙系统，大多数服务需要防火墙放行才能被访问。</p><h2 id="放行" tabindex="-1">放行 <a class="header-anchor" href="#放行" aria-hidden="true">#</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 开启普通端口</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--zone=public</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--add-port=80/tcp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--permanent</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 开启NAT转发，比如Docker Proxy</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--zone=public</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--add-masquerade</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--permanent</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 重载防火墙使配置立即生效</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--reload</span></span>
<span class="line"></span></code></pre></div><table><thead><tr><th>参数</th><th>解释</th></tr></thead><tbody><tr><td>--zone</td><td>作用域，public = 公共区域</td></tr><tr><td>--add-port=80/tcp</td><td>添加端口，格式为：端口/通讯协议</td></tr><tr><td>--permanent</td><td>永久生效，没有此参数重启后失效</td></tr></tbody></table><h2 id="服务" tabindex="-1">服务 <a class="header-anchor" href="#服务" aria-hidden="true">#</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">firewalld</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># 启动</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">firewalld</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># 停止</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">restart</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">firewalld</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># 重启</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">status</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">firewalld</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># 状态</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">disable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">firewalld</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># 禁用</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">enable</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">firewalld</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># 自启动</span></span>
<span class="line"></span></code></pre></div><h2 id="命令" tabindex="-1">命令 <a class="header-anchor" href="#命令" aria-hidden="true">#</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--version</span><span style="color:#A6ACCD;">                            </span><span style="color:#676E95;font-style:italic;"># 查看版本</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--help</span><span style="color:#A6ACCD;">                               </span><span style="color:#676E95;font-style:italic;"># 查看帮助</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--state</span><span style="color:#A6ACCD;">                              </span><span style="color:#676E95;font-style:italic;"># 状态</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--reload</span><span style="color:#A6ACCD;">                             </span><span style="color:#676E95;font-style:italic;"># 更新防火墙规则</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--complete-reload</span><span style="color:#A6ACCD;">                    </span><span style="color:#676E95;font-style:italic;"># 更新防火墙规则（断开连接）</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--list-all</span><span style="color:#A6ACCD;">                           </span><span style="color:#676E95;font-style:italic;"># 列出所有规则</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--list-port</span><span style="color:#A6ACCD;">                          </span><span style="color:#676E95;font-style:italic;"># 列出所有放行端口</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--panic-on</span><span style="color:#A6ACCD;">                           </span><span style="color:#676E95;font-style:italic;"># 拒绝所有包</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--panic-off</span><span style="color:#A6ACCD;">                          </span><span style="color:#676E95;font-style:italic;"># 取消拒绝状态</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--query-panic</span><span style="color:#A6ACCD;">                        </span><span style="color:#676E95;font-style:italic;"># 查看是否拒绝</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--get-active-zones</span><span style="color:#A6ACCD;">                   </span><span style="color:#676E95;font-style:italic;"># 查看区域信息</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--set-default-zone=public</span><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;"># 设置默认区域</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--get-zone-of-interface=eth0</span><span style="color:#A6ACCD;">         </span><span style="color:#676E95;font-style:italic;"># 查看指定接口所属区域</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--zone=dmz</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--list-ports</span><span style="color:#A6ACCD;">              </span><span style="color:#676E95;font-style:italic;"># 查看所有打开的端口</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--zone=public</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--add-interface=eth0</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># 指定区域加入接口</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--zone=dmz</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--add-port=8080/tcp</span><span style="color:#A6ACCD;">       </span><span style="color:#676E95;font-style:italic;"># 加入一个端口到区域</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--zone=work</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--add-service=smtp</span><span style="color:#A6ACCD;">       </span><span style="color:#676E95;font-style:italic;"># 添加一个服务</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--zone=work</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--remove-service=smtp</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># 移除一个服务</span></span>
<span class="line"></span></code></pre></div><blockquote><p>方跃明 2019-12-26</p></blockquote>`,10),e=[o];function t(c,r,C,y,i,A){return a(),l("div",null,e)}const f=s(p,[["render",t]]);export{D as __pageData,f as default};
