import{_ as a,o as l,c as p,f as e,g as s,h as o}from"./app.373b10f5.js";const E=JSON.parse('{"title":"CentOS 安装配置 OpenVPN","description":"这个就不多说了，真的不能多说……","frontmatter":{"title":"CentOS 安装配置 OpenVPN","description":"这个就不多说了，真的不能多说……","time":"2020-01-29T00:00:00.000Z","category":"运维","tags":["CentOS","Linux","VPN"]},"headers":[{"level":2,"title":"环境","slug":"环境","link":"#环境","children":[]},{"level":2,"title":"流程","slug":"流程","link":"#流程","children":[]},{"level":2,"title":"安装依赖","slug":"安装依赖","link":"#安装依赖","children":[]},{"level":2,"title":"目录结构","slug":"目录结构","link":"#目录结构","children":[]},{"level":2,"title":"配置easy-rsa","slug":"配置easy-rsa","link":"#配置easy-rsa","children":[]},{"level":2,"title":"服务端","slug":"服务端","link":"#服务端","children":[{"level":3,"title":"创建PKI、CA、证书、密钥","slug":"创建pki、ca、证书、密钥","link":"#创建pki、ca、证书、密钥","children":[]},{"level":3,"title":"整理密钥和证书","slug":"整理密钥和证书","link":"#整理密钥和证书","children":[]},{"level":3,"title":"配置服务器","slug":"配置服务器","link":"#配置服务器","children":[]},{"level":3,"title":"启动服务","slug":"启动服务","link":"#启动服务","children":[]}]},{"level":2,"title":"证书客户端","slug":"证书客户端","link":"#证书客户端","children":[{"level":3,"title":"创建证书和密钥","slug":"创建证书和密钥","link":"#创建证书和密钥","children":[]},{"level":3,"title":"整理证书和密钥","slug":"整理证书和密钥","link":"#整理证书和密钥","children":[]},{"level":3,"title":"证书客户端配置ovpn文件","slug":"证书客户端配置ovpn文件","link":"#证书客户端配置ovpn文件","children":[]}]},{"level":2,"title":"密码客户端","slug":"密码客户端","link":"#密码客户端","children":[{"level":3,"title":"用户认证脚本","slug":"用户认证脚本","link":"#用户认证脚本","children":[]},{"level":3,"title":"用户密码文件","slug":"用户密码文件","link":"#用户密码文件","children":[]},{"level":3,"title":"用户固定IP配置","slug":"用户固定ip配置","link":"#用户固定ip配置","children":[]},{"level":3,"title":"修改服务器配置支持用户密码登录","slug":"修改服务器配置支持用户密码登录","link":"#修改服务器配置支持用户密码登录","children":[]},{"level":3,"title":"密码客户端配置文件ovpn","slug":"密码客户端配置文件ovpn","link":"#密码客户端配置文件ovpn","children":[]}]},{"level":2,"title":"OpenVPN客户端","slug":"openvpn客户端","link":"#openvpn客户端","children":[]},{"level":2,"title":"提醒","slug":"提醒","link":"#提醒","children":[]}],"relativePath":"centos-openvpn.md"}'),t={name:"centos-openvpn.md"},c=s('<h1 id="centos安装配置openvpn" tabindex="-1">CentOS安装配置OpenVPN <a class="header-anchor" href="#centos安装配置openvpn" aria-hidden="true">#</a></h1><blockquote><p>方跃明 2020-01-29</p></blockquote><p>这个就不多说了，真的不能多说……</p><h2 id="环境" tabindex="-1">环境 <a class="header-anchor" href="#环境" aria-hidden="true">#</a></h2><table><thead><tr><th>环境</th><th>版本</th><th>说明</th></tr></thead><tbody><tr><td>CentOS</td><td>el8</td><td>兼容el7</td></tr><tr><td>easy-rsa</td><td>3.0.6-1.el7</td><td></td></tr><tr><td>openvpn</td><td>2.4.8-1.el7</td><td></td></tr></tbody></table><h2 id="流程" tabindex="-1">流程 <a class="header-anchor" href="#流程" aria-hidden="true">#</a></h2>',6),r=s(`<h2 id="安装依赖" tabindex="-1">安装依赖 <a class="header-anchor" href="#安装依赖" aria-hidden="true">#</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">dnf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">net-tools</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 强烈建议使用国内repo源，如：阿里云</span></span>
<span class="line"><span style="color:#FFCB6B;">wget</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-O</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/yum.repos.d/epel.repo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://mirrors.aliyun.com/repo/epel-7.repo</span></span>
<span class="line"><span style="color:#FFCB6B;">dnf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">openvpn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">easy-rsa</span></span>
<span class="line"></span></code></pre></div><h2 id="目录结构" tabindex="-1">目录结构 <a class="header-anchor" href="#目录结构" aria-hidden="true">#</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">|-- easy-rsa                # 证书制作工具</span></span>
<span class="line"><span style="color:#A6ACCD;">|   |-- pki                 #   PKI</span></span>
<span class="line"><span style="color:#A6ACCD;">|   \`-- vars                #   easy-rsa配置</span></span>
<span class="line"><span style="color:#A6ACCD;">|-- certs                   # 证书存放目录</span></span>
<span class="line"><span style="color:#A6ACCD;">|   |-- server              #   服务端</span></span>
<span class="line"><span style="color:#A6ACCD;">|   |   |-- ca.crt          #     CA根证书</span></span>
<span class="line"><span style="color:#A6ACCD;">|   |   |-- ta.key          #     TLS鉴权密钥</span></span>
<span class="line"><span style="color:#A6ACCD;">|   |   |-- dh.pem          #     SSL协商DH</span></span>
<span class="line"><span style="color:#A6ACCD;">|   |   |-- server.crt      #     服务器证书</span></span>
<span class="line"><span style="color:#A6ACCD;">|   |   \`-- server.key      #     服务器私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">|   \`-- client              # 证书客户端</span></span>
<span class="line"><span style="color:#A6ACCD;">|       \`-- user01          #   用户01</span></span>
<span class="line"><span style="color:#A6ACCD;">|           |-- ca.crt      #     CA根证书</span></span>
<span class="line"><span style="color:#A6ACCD;">|           |-- ta.key      #     TLS鉴权密钥</span></span>
<span class="line"><span style="color:#A6ACCD;">|           |-- user01.crt  #     用户证书</span></span>
<span class="line"><span style="color:#A6ACCD;">|           |-- user01.key  #     用户私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">|           \`-- user01.ovpn #     OpenVPN客户端集成配置</span></span>
<span class="line"><span style="color:#A6ACCD;">|-- client                  # 密码用户配置（固定IP）</span></span>
<span class="line"><span style="color:#A6ACCD;">|   |-- user1               #   用户1</span></span>
<span class="line"><span style="color:#A6ACCD;">|   \`-- user2               #   用户2</span></span>
<span class="line"><span style="color:#A6ACCD;">\`-- sever.conf              # 服务端配置：openvpn@server</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="配置easy-rsa" tabindex="-1">配置easy-rsa <a class="header-anchor" href="#配置easy-rsa" aria-hidden="true">#</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/share/easy-rsa/3.0.6/</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/openvpn/easy-rsa/</span></span>
<span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/share/doc/easy-rsa-3.0.3/vars.example</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/openvpn/easy-rsa/vars</span></span>
<span class="line"><span style="color:#FFCB6B;">vim</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/openvpn/vars</span></span>
<span class="line"></span></code></pre></div><div class="language-ini"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 请根据需要修改，否则使用默认值</span></span>
<span class="line"><span style="color:#A6ACCD;">set_var EASYRSA_REQ_COUNTRY    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">US</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">set_var EASYRSA_REQ_PROVINCE   </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">California</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">set_var EASYRSA_REQ_CITY       </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">San Francisco</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">set_var EASYRSA_REQ_ORG        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Copyleft Certificate Co</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">set_var EASYRSA_REQ_EMAIL      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">me@example.net</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">set_var EASYRSA_REQ_OU         </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">My Organizational Unit</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><h2 id="服务端" tabindex="-1">服务端 <a class="header-anchor" href="#服务端" aria-hidden="true">#</a></h2><h3 id="创建pki、ca、证书、密钥" tabindex="-1">创建PKI、CA、证书、密钥 <a class="header-anchor" href="#创建pki、ca、证书、密钥" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/openvpn/easy-rsa</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">### 创建PKI</span></span>
<span class="line"><span style="color:#82AAFF;">.</span><span style="color:#FFCB6B;">/easyrsa</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">init-pki</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Note: using Easy-RSA configuration from: ./vars</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Your newly created PKI dir is: /etc/openvpn/easy-rsa/pki</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">### 创建新的CA，不使用密码</span></span>
<span class="line"><span style="color:#82AAFF;">.</span><span style="color:#FFCB6B;">/easyrsa</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build-ca</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nopass</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Common Name (eg: your user, host, or server name) [Easy-RSA CA]: # 直接回车</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Your new CA certificate file for publishing is at: /etc/openvpn/easy-rsa/pki/ca.crt</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">### 创建服务端证书和密钥</span></span>
<span class="line"><span style="color:#82AAFF;">.</span><span style="color:#FFCB6B;">/easyrsa</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gen-req</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nopass</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Common Name (eg: your user, host, or server name) [server]: # 直接回车，默认server</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Keypair and certificate request completed. Your files are:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># req: /etc/openvpn/easy-rsa/pki/reqs/server.req</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># key: /etc/openvpn/easy-rsa/pki/private/server.key</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">### 签约服务端证书</span></span>
<span class="line"><span style="color:#82AAFF;">.</span><span style="color:#FFCB6B;">/easyrsa</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sign</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">server</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Request subject, to be signed as a server certificate for 1080 days:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># subject=</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#    commonName                = server</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Type the word &#39;yes&#39; to continue, or any other input to abort.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#  Confirm request details: yes # 输入yes回车</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">### 创建Diffie-Hellman</span></span>
<span class="line"><span style="color:#82AAFF;">.</span><span style="color:#FFCB6B;">/easyrsa</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gen-dh</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># DH parameters of size 2048 created at /etc/openvpn/easy-rsa/pki/dh.pem</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">### 创建tls-auth key</span></span>
<span class="line"><span style="color:#FFCB6B;">openvpn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--genkey</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--secret</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ta.key</span></span>
<span class="line"></span></code></pre></div><h3 id="整理密钥和证书" tabindex="-1">整理密钥和证书 <a class="header-anchor" href="#整理密钥和证书" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/openvpn/certs/server</span></span>
<span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/openvpn/easy-rsa/pki/dh.pem</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/openvpn/easy-rsa/ta.key</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/openvpn/easy-rsa/pki/ca.crt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/openvpn/easy-rsa/pki/issued/server.crt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/openvpn/easy-rsa/pki/private/server.key</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.</span></span>
<span class="line"></span></code></pre></div><h3 id="配置服务器" tabindex="-1">配置服务器 <a class="header-anchor" href="#配置服务器" aria-hidden="true">#</a></h3><div class="language-ini"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># /etc/openvpn/server.conf</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 其样本位于/usr/share/doc/openvpn-2.4.8/sample/sample-config-files/server.conf</span></span>
<span class="line"><span style="color:#A6ACCD;">port 1194 </span><span style="color:#676E95;font-style:italic;"># 监听的端口号</span></span>
<span class="line"><span style="color:#A6ACCD;">proto udp </span><span style="color:#676E95;font-style:italic;"># 服务端用的协议，一般用稍快的udp</span></span>
<span class="line"><span style="color:#A6ACCD;">dev tun</span></span>
<span class="line"><span style="color:#A6ACCD;">ca /etc/openvpn/server/certs/ca.crt </span><span style="color:#676E95;font-style:italic;"># CA 根证书路径</span></span>
<span class="line"><span style="color:#A6ACCD;">cert /etc/openvpn/server/certs/server.crt </span><span style="color:#676E95;font-style:italic;"># open VPN 服务器证书路径</span></span>
<span class="line"><span style="color:#A6ACCD;">key /etc/openvpn/server/certs/server.key </span><span style="color:#676E95;font-style:italic;"># open VPN 服务器密钥路径，请勿泄露！</span></span>
<span class="line"><span style="color:#A6ACCD;">dh /etc/openvpn/server/certs/dh.pem </span><span style="color:#676E95;font-style:italic;"># Diffie-Hellman 算法密钥文件路径</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># tls-auth key，参数 0 可以省略，如果不省略，那么客户端配置相应的参数该配成 1。</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 如果省略，那么客户端不需要 tls-auth 配置</span></span>
<span class="line"><span style="color:#A6ACCD;">tls-auth /etc/openvpn/server/certs/ta.key 0</span></span>
<span class="line"><span style="color:#A6ACCD;">server 10.8.0.0 255.255.255.0 </span><span style="color:#676E95;font-style:italic;"># OpenVPN子网，默认为 10.8.0.0/24</span></span>
<span class="line"><span style="color:#A6ACCD;">compress lzo</span></span>
<span class="line"><span style="color:#A6ACCD;">duplicate-cn   </span><span style="color:#676E95;font-style:italic;"># 允许一个用户多个终端连接</span></span>
<span class="line"><span style="color:#A6ACCD;">keepalive 10 120</span></span>
<span class="line"><span style="color:#A6ACCD;">comp-lzo</span></span>
<span class="line"><span style="color:#A6ACCD;">persist-key</span></span>
<span class="line"><span style="color:#A6ACCD;">persist-tun</span></span>
<span class="line"><span style="color:#A6ACCD;">verb 3</span></span>
<span class="line"><span style="color:#A6ACCD;">explicit-exit-notify 1</span></span>
<span class="line"></span></code></pre></div><h3 id="启动服务" tabindex="-1">启动服务 <a class="header-anchor" href="#启动服务" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">openvpn@server</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># 启动</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">enable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">openvepn@server</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 设置自启动</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--zone=public</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--add-port=1194/udp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--permanent</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># success</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--reload</span><span style="color:#A6ACCD;">             </span><span style="color:#676E95;font-style:italic;"># 开发防火墙端口并重载防火墙</span></span>
<span class="line"></span></code></pre></div><h2 id="证书客户端" tabindex="-1">证书客户端 <a class="header-anchor" href="#证书客户端" aria-hidden="true">#</a></h2><p>多个客户端请自行重复以下操作</p><h3 id="创建证书和密钥" tabindex="-1">创建证书和密钥 <a class="header-anchor" href="#创建证书和密钥" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/openvpn/easy-rsa</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">### 创建服务端证书和密钥</span></span>
<span class="line"><span style="color:#82AAFF;">.</span><span style="color:#FFCB6B;">/easyrsa</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gen-req</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user01</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nopass</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Common Name (eg: your user, host, or server name) [user01]: # 直接回车</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Keypair and certificate request completed. Your files are:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># req: /etc/openvpn/client/easy-rsa/pki/reqs/user01.req</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># key: /etc/openvpn/client/easy-rsa/pki/private/user01.key</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">### 签约客户端证书</span></span>
<span class="line"><span style="color:#82AAFF;">.</span><span style="color:#FFCB6B;">/easyrsa</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sign</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">client</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user01</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Request subject, to be signed as a client certificate for 1080 days:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># subject=</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#     commonName                = user01</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Type the word &#39;yes&#39; to continue, or any other input to abort.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#  Confirm request details: yes # 输入yes回车</span></span>
<span class="line"></span></code></pre></div><h3 id="整理证书和密钥" tabindex="-1">整理证书和密钥 <a class="header-anchor" href="#整理证书和密钥" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/openvpn/certs/client/user01</span></span>
<span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/openvpn/easy-rsa/ta.key</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/openvpn/easy-rsa/pki/ca.crt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/openvpn/easy-rsa/pki/issued/user01.crt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/openvpn/easy-rsa/pki/private/user01.key</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.</span></span>
<span class="line"></span></code></pre></div><h3 id="证书客户端配置ovpn文件" tabindex="-1">证书客户端配置ovpn文件 <a class="header-anchor" href="#证书客户端配置ovpn文件" aria-hidden="true">#</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">client</span></span>
<span class="line"><span style="color:#A6ACCD;">dev tun</span></span>
<span class="line"><span style="color:#A6ACCD;">proto udp</span></span>
<span class="line"><span style="color:#A6ACCD;">remote your.openvpn.server 1194</span></span>
<span class="line"><span style="color:#A6ACCD;">resolv-retry infinite</span></span>
<span class="line"><span style="color:#A6ACCD;">nobind</span></span>
<span class="line"><span style="color:#A6ACCD;">persist-key</span></span>
<span class="line"><span style="color:#A6ACCD;">persist-tun</span></span>
<span class="line"><span style="color:#A6ACCD;">remote-cert-tls server</span></span>
<span class="line"><span style="color:#A6ACCD;">cipher AES-256-CBC</span></span>
<span class="line"><span style="color:#A6ACCD;">comp-lzo</span></span>
<span class="line"><span style="color:#A6ACCD;">nice 0</span></span>
<span class="line"><span style="color:#A6ACCD;">verb 3</span></span>
<span class="line"><span style="color:#A6ACCD;">mute 10</span></span>
<span class="line"><span style="color:#A6ACCD;">key-direction 1</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;tls-auth&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">ta.key 文件内容</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;/tls-auth&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;ca&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">ca.crt 文件内容</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;/ca&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;cert&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">client.crt 文件内容</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;/cert&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;key&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">client.key 文件内容</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;/key&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="密码客户端" tabindex="-1">密码客户端 <a class="header-anchor" href="#密码客户端" aria-hidden="true">#</a></h2><h3 id="用户认证脚本" tabindex="-1">用户认证脚本 <a class="header-anchor" href="#用户认证脚本" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">#!/bin/sh</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">###########################################################</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># checkpsw.sh (C) 2004 Mathias Sundman &lt;mathias@openvpn.se&gt;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># This script will authenticate OpenVPN users against</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># a plain text file. The passfile should simply contain</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># one row per user with the username first followed by</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># one or more space(s) or tab(s) and then the password.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">###########################################################</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">PASSFILE</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/etc/openvpn/psw-file</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">LOG_FILE</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/etc/openvpn/openvpn-password.log</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">TIME_STAMP</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">\`</span><span style="color:#FFCB6B;">date</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">+%Y-%m-%d %T</span><span style="color:#89DDFF;">&quot;\`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-r</span><span style="color:#89DDFF;"> &quot;\${</span><span style="color:#C3E88D;">PASSFILE</span><span style="color:#89DDFF;">}&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">];</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;\${</span><span style="color:#C3E88D;">TIME_STAMP</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">: Could not open password file </span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#89DDFF;">\${</span><span style="color:#C3E88D;">PASSFILE</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#C3E88D;"> for reading.</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">LOG_FILE</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">exit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">CORRECT_PASSWORD</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">\`</span><span style="color:#FFCB6B;">awk</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">!/^;/&amp;&amp;!/^#/&amp;&amp;$1==&quot;</span><span style="color:#89DDFF;">&#39;\${</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">}&#39;</span><span style="color:#C3E88D;">&quot;{print $2;exit}</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">\${</span><span style="color:#C3E88D;">PASSFILE</span><span style="color:#89DDFF;">}\`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;"> &quot;\${</span><span style="color:#C3E88D;">CORRECT_PASSWORD</span><span style="color:#89DDFF;">}&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> &quot;&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">];</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;\${</span><span style="color:#C3E88D;">TIME_STAMP</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">: User does not exist: username=</span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#89DDFF;">\${</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#C3E88D;">, password=</span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#89DDFF;">\${</span><span style="color:#C3E88D;">password</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#C3E88D;">.</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">LOG_FILE</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">exit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;"> &quot;\${</span><span style="color:#C3E88D;">password</span><span style="color:#89DDFF;">}&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> &quot;\${</span><span style="color:#C3E88D;">CORRECT_PASSWORD</span><span style="color:#89DDFF;">}&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">];</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;\${</span><span style="color:#C3E88D;">TIME_STAMP</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">: Successful authentication: username=</span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#89DDFF;">\${</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#C3E88D;">.</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">LOG_FILE</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">exit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;\${</span><span style="color:#C3E88D;">TIME_STAMP</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">: Incorrect password: username=</span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#89DDFF;">\${</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#C3E88D;">, password=</span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#89DDFF;">\${</span><span style="color:#C3E88D;">password</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#C3E88D;">.</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">LOG_FILE</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#82AAFF;">exit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 赋予可执行权限</span></span>
<span class="line"><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/openvpn/checkpsw.sh</span></span>
<span class="line"></span></code></pre></div><h3 id="用户密码文件" tabindex="-1">用户密码文件 <a class="header-anchor" href="#用户密码文件" aria-hidden="true">#</a></h3><p>位于<code>/etc/openvpn/psw-file</code></p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">user1 passwd1</span></span>
<span class="line"><span style="color:#A6ACCD;">user2 passwd2</span></span>
<span class="line"><span style="color:#A6ACCD;"># chown nobody.nobody /etc/openvpn/psw-file</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="用户固定ip配置" tabindex="-1">用户固定IP配置 <a class="header-anchor" href="#用户固定ip配置" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">vi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/openvpn/client/user1</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># chown -R nobody.nobody /etc/openvpn/client</span></span>
<span class="line"></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">ifconfig-push  10.8.0.9  10.8.0.10</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><code>ifconfig-push</code>中的每一对IP地址表示虚拟客户端和服务器的IP端点。 它们必须从连续的/30子网网段中获取(这里是/30表示xxx.xxx.xxx.xxx/30，即子网掩码位数为30)，以便于与Windows客户端和TAP-Windows驱动兼容。 明确地说，每个端点的IP地址对的最后8位字节必须取自下面的集合：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">[1, 2]    [5, 6]    [9, 10]   [ 13, 14] [ 17, 18]</span></span>
<span class="line"><span style="color:#A6ACCD;">[21, 22]  [25, 26]  [ 29, 30] [ 33, 34] [ 37, 38]</span></span>
<span class="line"><span style="color:#A6ACCD;">[41, 42]  [45, 46]  [ 49, 50] [ 53, 54] [ 57, 58]</span></span>
<span class="line"><span style="color:#A6ACCD;">[ 61, 62] [65, 66]  [ 69, 70] [ 73, 74] [ 77, 78]</span></span>
<span class="line"><span style="color:#A6ACCD;">[ 81, 82] [ 85, 86] [ 89, 90] [ 93, 94] [ 97, 98]</span></span>
<span class="line"><span style="color:#A6ACCD;">[101,102] [105,106] [109,110] [113,114] [117,118]</span></span>
<span class="line"><span style="color:#A6ACCD;">[121,122] [125,126] [129,130] [133,134] [137,138]</span></span>
<span class="line"><span style="color:#A6ACCD;">[141,142] [145,146] [149,150] [153,154] [157,158]</span></span>
<span class="line"><span style="color:#A6ACCD;">[161,162] [165,166] [169,170] [173,174] [177,178]</span></span>
<span class="line"><span style="color:#A6ACCD;">[181,182] [185,186] [189,190] [193,194] [197,198]</span></span>
<span class="line"><span style="color:#A6ACCD;">[201,202] [205,206] [209,210] [213,214] [217,218]</span></span>
<span class="line"><span style="color:#A6ACCD;">[221,222] [225,226] [229,230] [233,234] [237,238]</span></span>
<span class="line"><span style="color:#A6ACCD;">[241,242] [245,246] [249,250] [253,254]</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="修改服务器配置支持用户密码登录" tabindex="-1">修改服务器配置支持用户密码登录 <a class="header-anchor" href="#修改服务器配置支持用户密码登录" aria-hidden="true">#</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">script-security 3</span></span>
<span class="line"><span style="color:#A6ACCD;">auth-user-pass-verify /etc/openvpn/checkpsw.sh via-env # 指定用户认证脚本</span></span>
<span class="line"><span style="color:#A6ACCD;">username-as-common-name</span></span>
<span class="line"><span style="color:#A6ACCD;">verify-client-cert none</span></span>
<span class="line"><span style="color:#A6ACCD;">client-cert-not-required              # 非双重验证，仅用户名密码验证</span></span>
<span class="line"><span style="color:#A6ACCD;">client-config-dir /etc/openvpn/client # 客户端配置（固定IP）</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="密码客户端配置文件ovpn" tabindex="-1">密码客户端配置文件ovpn <a class="header-anchor" href="#密码客户端配置文件ovpn" aria-hidden="true">#</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">client</span></span>
<span class="line"><span style="color:#A6ACCD;">dev tun</span></span>
<span class="line"><span style="color:#A6ACCD;">proto udp</span></span>
<span class="line"><span style="color:#A6ACCD;">remote your.openvpn.server 1194</span></span>
<span class="line"><span style="color:#A6ACCD;">resolv-retry infinite</span></span>
<span class="line"><span style="color:#A6ACCD;">nobind</span></span>
<span class="line"><span style="color:#A6ACCD;">persist-key</span></span>
<span class="line"><span style="color:#A6ACCD;">persist-tun</span></span>
<span class="line"><span style="color:#A6ACCD;">remote-cert-tls server</span></span>
<span class="line"><span style="color:#A6ACCD;">auth-nocache</span></span>
<span class="line"><span style="color:#A6ACCD;">auth-user-pass</span></span>
<span class="line"><span style="color:#A6ACCD;">cipher AES-256-CBC</span></span>
<span class="line"><span style="color:#A6ACCD;">comp-lzo</span></span>
<span class="line"><span style="color:#A6ACCD;">nice 0</span></span>
<span class="line"><span style="color:#A6ACCD;">verb 3</span></span>
<span class="line"><span style="color:#A6ACCD;">mute 10</span></span>
<span class="line"><span style="color:#A6ACCD;">key-direction 1</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;tls-auth&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">ta.key 文件内容</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;/tls-auth&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;ca&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">ca.crt 文件内容</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;/ca&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="openvpn客户端" tabindex="-1">OpenVPN客户端 <a class="header-anchor" href="#openvpn客户端" aria-hidden="true">#</a></h2><p>OpenVPN UI <a href="https://openvpn.net/community-downloads" target="_blank" rel="noreferrer">官方下载地址</a>，鉴于需科学上网，请自行解决下载。</p><p>安装并运行，导入制作好的ovpn文件，连接，若启用密码验证，输入用户名密码，确定，即可连接VPN。</p><h2 id="提醒" tabindex="-1">提醒 <a class="header-anchor" href="#提醒" aria-hidden="true">#</a></h2><ul><li>启用密码验证则不能仅依赖证书通过验证，但密码验证可启用证书进行双重验证</li><li>大型商业用户可以使用付费便于管理的<code>OpenVPN Access Server</code>，使用<code>OpenVPN Connect</code>客户端连接VPN。</li></ul>`,45);function i(y,C,A,D,d,F){const n=o("Mermaid");return l(),p("div",null,[c,e(n,{id:"mermaid_382ee1e7",graph:"graph%20TB%0AA(%E5%AE%89%E8%A3%85OpenVPN%E5%92%8C%E8%AF%81%E4%B9%A6%E7%94%9F%E6%88%90%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96)%0AA%20--%3E%20B(%E7%94%9F%E6%88%90CA%E5%92%8C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%AF%81%E4%B9%A6)%0AB%20--%3E%20C(%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AEserver.conf)%0AC%20--%3E%20D(%E6%B7%BB%E5%8A%A0%E9%98%B2%E7%81%AB%E5%A2%99%E8%A7%84%E5%88%99)%0AD%20--%3E%20E(%E5%90%AF%E5%8A%A8OpenVPN%E6%9C%8D%E5%8A%A1)%0AE%20--%3E%20F(%E7%94%9F%E6%88%90%E5%AE%A2%E6%88%B7%E7%AB%AFCA%E5%92%8C%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AF%81%E4%B9%A6)%0AF%20--%3E%20G(%E6%89%93%E5%8C%85%E7%9B%B8%E5%85%B3%E6%96%87%E4%BB%B6%E6%88%90.ovpn%E4%BE%9B%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BD%BF%E7%94%A8)%0AG%20--%3E%20H(%E5%AE%89%E8%A3%85OpenVPN%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%9E%E6%8E%A5VPN)"}),r])}const u=a(t,[["render",i]]);export{E as __pageData,u as default};
